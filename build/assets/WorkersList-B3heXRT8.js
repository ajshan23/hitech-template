import{r as t,j as e,ah as b}from"./index-B7gDcve1.js";import{A as C}from"./AdaptableCard-DWDoig49.js";import{D as W}from"./DataTable-Bg1__MjQ.js";import{B as A}from"./Badge-C_F6d7pz.js";import{F as I,_ as z}from"./toString-BTJzyLo_.js";import{I as E}from"./Input-DDrsmMR1.js";import{L as P}from"./LinkButton-DS8hYchV.js";import{d as T}from"./debounce-C-swc0Qo.js";import"./Card-ClSbbZpK.js";import"./index-BxaiHzCN.js";import"./index-BJgtahsK.js";import"./Skeleton-CipR6sCE.js";import"./Select-BdpL1eB2.js";import"./get-B7Jo_wI6.js";import"./Views-BimbbXt4.js";import"./context-Dj6ocMUM.js";import"./index-CUuT-VC2.js";import"./_baseIsEqual-C86fEe5q.js";import"./_getPrototype-BDGNlnFu.js";import"./index-BzaCQqcK.js";import"./isNil-Bi4sFohX.js";import"./useColorLevel-10S34ZEH.js";const D={true:{dotClass:"bg-emerald-500"},false:{dotClass:"bg-red-500"}},F=({searchTerm:o})=>{const l=t.useRef(null),[d,m]=t.useState([]),[c,f]=t.useState(!0),[u,g]=t.useState(1),[p,j]=t.useState(10),[k,w]=t.useState(0);t.useEffect(()=>{g(1)},[o]),t.useEffect(()=>{(async()=>{var a,r,n,i;f(!0);try{const h={page:u,limit:p,searchTerm:o||""},x=await b.get("https://mytest.hitechengineeringcompany.in/api/worker",{params:h});m((r=(a=x.data)==null?void 0:a.data)==null?void 0:r.workers),w((i=(n=x.data)==null?void 0:n.data)==null?void 0:i.totalPages)}catch(h){console.error("Error fetching workers:",h)}finally{f(!1)}})()},[u,p,o]);const N=async(s,a)=>{try{const r=await b.put(`https://mytest.hitechengineeringcompany.in/api/worker/change-status?id=${s}`);m(n=>n.map(i=>i._id===s?{...i,status:!a}:i)),console.log("Status updated successfully:",r.data)}catch(r){console.error("Error toggling worker status:",r)}},y=t.useMemo(()=>[{header:"Image",accessorKey:"workerImage",cell:s=>e.jsx("img",{src:s.row.original.workerImage,alt:s.row.original.workerName,className:"w-10 h-10 rounded-full"})},{header:"Worker Name",accessorKey:"workerName",cell:s=>e.jsx("span",{className:"capitalize",children:s.row.original.workerName})},{header:"Phone",accessorKey:"phoneNumber"},{header:"Status",accessorKey:"status",cell:s=>{var n;const r=s.row.original.status;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:((n=D[String(r)])==null?void 0:n.dotClass)||"bg-gray-500"}),e.jsx("span",{className:"capitalize font-semibold",children:r?"Active":"Inactive"})]})}},{header:"Actions",id:"actions",cell:s=>{const a=s.row.original.status;return e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:`flex items-center justify-center w-24 h-8 rounded-full transition-colors ${a?"bg-red-500 hover:bg-red-600":"bg-emerald-500 hover:bg-emerald-600"}`,onClick:()=>N(s.row.original._id,a),children:e.jsx("span",{className:"flex items-center gap-1 text-white",children:a?e.jsx(e.Fragment,{children:e.jsx("span",{children:"Deactivate"})}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Activate"})})})})})}}],[]),S=s=>g(s),v=s=>{j(s),g(1)};return e.jsx(W,{ref:l,columns:y,data:d,loading:c,pagingData:{total:k,pageIndex:u,pageSize:p},onPaginationChange:S,onSelectChange:v})},K=({onSearch:o})=>{const l=t.useRef(null),d=T(c=>{o(c)},500),m=c=>{d(c.target.value)};return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsx(E,{ref:l,className:"w-full md:w-96 md:mb-0 mb-4",size:"sm",placeholder:"Search workers...",prefix:e.jsx(I,{className:"text-lg"}),onChange:m}),e.jsx(P,{to:"/app/worker/form",block:!0,variant:"solid",size:"sm",icon:e.jsx(z,{}),className:"block lg:inline-block md:mb-0 mb-4",children:"Add Worker"})]})},oe=()=>{const[o,l]=t.useState("");return e.jsxs(C,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Workers"}),e.jsx(K,{onSearch:l})]}),e.jsx(F,{searchTerm:o})]})};export{oe as default};
