import{j as n,r as c,a4 as B,c as F}from"./index-C2iY12u9.js";import{T as j}from"./index-ByEeNh7A.js";import{S as b,P as O}from"./Skeleton-CmOtYc4u.js";import{S as L}from"./Select-DVojIqnk.js";import{C as V}from"./index-CgfdXKrB.js";import{u as W,f as y,g as q,a as G,b as J,c as K}from"./index-BP1Ivwmc.js";const{Tr:Q,Td:U,TBody:X}=j,Y=m=>{const{columns:i=1,rows:u=10,avatarInColumns:l=[],avatarProps:o}=m;return n.jsx(X,{children:Array.from(new Array(u),(a,s)=>s+0).map(a=>n.jsx(Q,{children:Array.from(new Array(i),(s,d)=>d+0).map(s=>n.jsx(U,{children:n.jsxs("div",{className:"flex flex-auto items-center gap-2",children:[l.includes(s)&&n.jsx("div",{children:n.jsx(b,{variant:"circle",...o})}),n.jsx(b,{})]})},`col-${s}`))},`row-${a}`))})},{Tr:k,Th:Z,Td:ee,THead:te,TBody:ne,Sorter:se}=j,M=m=>{const{indeterminate:i,onChange:u,onCheckBoxChange:l,onIndeterminateCheckBoxChange:o,...a}=m,s=c.useRef(null);c.useEffect(()=>{typeof i=="boolean"&&s.current&&(s.current.indeterminate=!a.checked&&i)},[s,i]);const d=r=>{u(r),l==null||l(r),o==null||o(r)};return n.jsx(V,{ref:s,className:"mb-0",onChange:(r,f)=>d(f),...a})};function ae(m,i){const{skeletonAvatarColumns:u,columns:l=[],data:o=[],loading:a=!1,onCheckBoxChange:s,onIndeterminateCheckBoxChange:d,onPaginationChange:r,onSelectChange:f,onSort:x,pageSizes:C=[10,25,50,100],selectable:R=!1,skeletonAvatarProps:P,pagingData:T={total:0,pageIndex:1,pageSize:10}}=m,{pageSize:p,pageIndex:A,total:I}=T,[g,z]=c.useState(null),v=c.useMemo(()=>C.map(t=>({value:t,label:`${t} / page`})),[C]),D=(t,e)=>{a||s==null||s(t,e)},H=(t,e)=>{a||d==null||d(t,e)},N=t=>{a||r==null||r(t)},$=t=>{a||f==null||f(Number(t))};c.useEffect(()=>{if(Array.isArray(g)){const t=g.length>0?g[0].desc?"desc":"asc":"",e=g.length>0?g[0].id:"";x==null||x({order:t,key:e})}},[g]);const w=c.useMemo(()=>{const t=l;return R?[{id:"select",header:({table:e})=>n.jsx(M,{checked:e.getIsAllRowsSelected(),indeterminate:e.getIsSomeRowsSelected(),onChange:e.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:S=>{H(S.target.checked,e.getRowModel().rows)}}),cell:({row:e})=>n.jsx(M,{checked:e.getIsSelected(),disabled:!e.getCanSelect(),indeterminate:e.getIsSomeSelected(),onChange:e.getToggleSelectedHandler(),onCheckBoxChange:S=>D(S.target.checked,e.original)})},...t]:t},[l,R]),h=W({data:o,columns:w,getCoreRowModel:q(),getFilteredRowModel:G(),getPaginationRowModel:J(),getSortedRowModel:K(),manualPagination:!0,manualSorting:!0,onSortingChange:t=>{z(t)},state:{sorting:g}}),E=()=>{h.resetSorting()},_=()=>{h.toggleAllRowsSelected(!1)};return c.useImperativeHandle(i,()=>({resetSorting:E,resetSelected:_})),n.jsxs(B,{loading:a&&o.length!==0,type:"cover",children:[n.jsxs(j,{children:[n.jsx(te,{children:h.getHeaderGroups().map(t=>n.jsx(k,{children:t.headers.map(e=>n.jsx(Z,{colSpan:e.colSpan,children:e.isPlaceholder?null:n.jsxs("div",{className:F(e.column.getCanSort()&&"cursor-pointer select-none point",a&&"pointer-events-none"),onClick:e.column.getToggleSortingHandler(),children:[y(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&n.jsx(se,{sort:e.column.getIsSorted()})]})},e.id))},t.id))}),a&&o.length===0?n.jsx(Y,{columns:w.length,rows:T.pageSize,avatarInColumns:u,avatarProps:P}):n.jsx(ne,{children:h.getRowModel().rows.slice(0,p).map(t=>n.jsx(k,{children:t.getVisibleCells().map(e=>n.jsx(ee,{children:y(e.column.columnDef.cell,e.getContext())},e.id))},t.id))})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsx(O,{pageSize:p,currentPage:A,total:I,onChange:N}),n.jsx("div",{style:{minWidth:130},children:n.jsx(L,{size:"sm",menuPlacement:"top",isSearchable:!1,value:v.filter(t=>t.value===p),options:v,onChange:t=>$(t==null?void 0:t.value)})})]})]})}const ge=c.forwardRef(ae);export{ge as D};
