import{r as e,j as n,c as N,ag as de,ao as me,ap as fe}from"./index-B7gDcve1.js";import{a as oe,b as U,u as Ce}from"./useRootClose-C3rMHg9v.js";import{i as q}from"./isNil-Bi4sFohX.js";import{A as pe}from"./index-N1U8ffo8.js";import{m as ve}from"./Views-BimbbXt4.js";import{c as H}from"./chainedFunction-BxZSneMW.js";import{a9 as le,G as re,aa as xe,ab as he}from"./toString-BTJzyLo_.js";const Z=e.createContext(null),be=Z.Provider,V=e.createContext({}),ae=V.Provider;V.Consumer;function ee(l){const[c,b]=e.useState(!1),[o,h]=e.useState([]),[u,r]=e.useState(null),a=e.useRef(null),f=e.useCallback((t,s)=>{h(x=>[...x,{element:t,props:s}])},[]),d=e.useCallback(t=>{h(s=>s.filter(x=>{var C;return((C=x==null?void 0:x.element)==null?void 0:C.id)!==t}))},[]),p=e.useCallback(()=>{requestAnimationFrame(()=>{var t;document.activeElement!==l.current&&(a.current=document.activeElement,(t=l.current)==null||t.focus())})},[l]),m=e.useCallback(t=>{const s=o.indexOf(t);s!==-1&&(r(s),p())},[o,p]),i=e.useCallback((t,s)=>{var x;for(let C=t;C>-1&&C<o.length;C+=s)if(!((x=o[C].props)!=null&&x.disabled))return C;return null},[o]),M=e.useCallback(t=>{if(q(t))r(null),p();else{let s;t===0?s=i(0,1):t===-1&&(s=i(o.length-1,-1)),q(s)||m(o[s])}},[o,m,p,i]),w=e.useCallback(()=>{b(!0),p()},[p]),j=e.useCallback(()=>{b(!1),r(null),requestAnimationFrame(()=>{var t;(t=a.current)==null||t.focus()})},[]);return{open:c,items:o,activeItemIndex:u,registerItem:f,unregisterItem:d,focusItemAt:M,openMenu:w,closeMenu:j}}const J=e.forwardRef((l,c)=>{const{children:b,activeKey:o,onSelect:h,hidden:u,placement:r,menuClass:a,...f}=l,d=oe(c),p=U("menu-"),m=ee(d),i=t=>{const s=`rotateX(${t}deg)`;return r&&r.includes("center")?`${s} translateX(-50%)`:s},M={opacity:1,visibility:"visible",transform:i(0)},w={opacity:0,visibility:"hidden",transform:i(40)},j=w;return n.jsx(be,{value:{activeKey:o,onSelect:h},children:n.jsx(ae,{value:m,children:n.jsx(pe,{mode:"wait",children:!u&&n.jsx(ve.ul,{ref:d,id:p,initial:j,animate:M,exit:w,transition:{duration:.15,type:"tween"},className:a,...f,children:b})})})})});J.displayName="DropdownInnerMenu";const X=e.createContext(null);X.Provider;X.Consumer;const Q=e.forwardRef((l,c)=>{const{asElement:b="div",children:o,className:h,disabled:u,eventKey:r,isActive:a,menuItemHeight:f=35,onSelect:d,style:p,variant:m="light",...i}=l,t=N("menu-item",`menu-item-${m}`,a&&"menu-item-active",u&&"menu-item-disabled",!u&&"menu-item-hoverable",h),s=x=>{d&&d(r,x)};return n.jsx(b,{ref:c,className:t,style:{height:`${f}px`,...p},onClick:s,...i,children:o})});Q.displayName="BaseMenuItem";const{DEFAULT:ge,DIVIDER:se,HEADER:W,CUSTOM:Y}=me,ne=e.forwardRef((l,c)=>{const{asElement:b="li",children:o,active:h,disabled:u,className:r,submenu:a,style:f,eventKey:d,onClick:p,onSelect:m,variant:i=ge,...M}=l,{mode:w,direction:j}=de(),t=oe(c),s=U("menu-item-"),x=e.useRef(null),C=e.useContext(X),v=e.useContext(Z),_=e.useContext(V),g=ee(x),K=g.open,y=h||!q(v==null?void 0:v.activeKey)&&(v==null?void 0:v.activeKey)===d||!q(C==null?void 0:C.activeKey)&&(C==null?void 0:C.activeKey)===d,E=e.useCallback(()=>{a&&(g.openMenu(),g.focusItemAt(0))},[a,g]),F=e.useCallback(T=>{var $;m==null||m(d,T),($=v==null?void 0:v.onSelect)==null||$.call(v,d,T)},[d,m,v]),B=e.useCallback(T=>{u||(a?E():F(T))},[u,a,E,F]),I=e.useCallback(()=>{a&&g.openMenu()},[a,g]),L=e.useCallback(()=>{a&&g.closeMenu()},[a,g]),k={onClick:H(B,p)},{registerItem:R,unregisterItem:A}=_??{};if(a&&(k.onMouseOver=I,k.onMouseOut=L),e.useEffect(()=>(i!==se&&i!==W&&(R==null||R(t.current,{disabled:u})),()=>{A==null||A(s)}),[R,A,t,s,u,i]),i===se||i===W||i===Y)return n.jsx(b,{ref:t,id:s,style:f,className:N(`menu-item-${i}`,r),...i===Y?k:{},...M,children:(i===W||i===Y)&&o});function S(){return e.isValidElement(o)?e.cloneElement(o):o}function D(){return a?n.jsx(ae,{value:g,children:e.cloneElement(a,{ref:x,hidden:!K})}):null}return a?n.jsxs("li",{...M,style:f,className:"relative",...k,children:[n.jsxs(Q,{ref:t,asElement:"div",id:s,isActive:y,eventKey:d,variant:w,className:N("dropdown-submenu-item",r),children:[n.jsx("span",{children:o}),j==="rtl"?n.jsx(le,{}):n.jsx(re,{})]}),D()]}):n.jsxs(Q,{ref:t,asElement:"li",style:f,isActive:y,disabled:u,eventKey:d,variant:w,className:r,...k,...M,children:[S(),D()]})});ne.displayName="DropdownItem";const te=e.forwardRef((l,c)=>{const{eventKey:b,title:o,className:h,placement:u,...r}=l,a=e.useContext(Z),f="dropdown-menu",p=N(f,u,h),m=N(f,"dropdown-submenu"),i=n.jsx(J,{ref:c,className:m,placement:u,...r});if(a){const M=N(h);return n.jsx(ne,{className:M,submenu:i,eventKey:b,children:o})}return n.jsx(J,{ref:c,className:p,placement:u,...r})});te.displayName="DropdownMenu";const Me=({placement:l,children:c})=>l&&l.includes("middle-start")?n.jsxs(n.Fragment,{children:[c,n.jsx(re,{})]}):l&&l.includes("middle-end")?n.jsxs(n.Fragment,{children:[n.jsx(le,{}),c]}):l&&l.includes("top")?n.jsxs(n.Fragment,{children:[c,n.jsx(xe,{})]}):n.jsxs(n.Fragment,{children:[c,n.jsx(he,{})]}),ie=e.forwardRef((l,c)=>{const{className:b,renderTitle:o,children:h,placement:u="bottom-start",disabled:r,toggleClassName:a,...f}=l,m=N("dropdown-toggle",b,a,r&&"dropdown-toggle-disabled"),i=N(m,"dropdown-toggle-default");return o?n.jsx("div",{className:m,...f,ref:c,children:o}):n.jsx("div",{ref:c,className:i,...f,children:n.jsx("span",{className:"flex items-center",children:n.jsx(Me,{placement:u,children:h})})})});ie.displayName="DropdownToggle";function z(l,c){return Array.isArray(c)?c.indexOf(l)>=0:l===c}const{BOTTOM_START:we}=fe,Ie="click",je="hover",ye="context",ce=e.forwardRef((l,c)=>{const{title:b,children:o,menuClass:h,menuStyle:u,disabled:r,renderTitle:a,placement:f=we,activeKey:d,toggleClassName:p,trigger:m="click",style:i,onClick:M,onMouseEnter:w,onMouseLeave:j,onContextMenu:t,onSelect:s,onOpen:x,onClose:C,onToggle:v,..._}=l,g=e.useRef(null),K=e.useRef(null),y=ee(g),E=y.open,F=U("dropdown-toggle-"),B=U("base-menu-"),I=e.useCallback(O=>{const P=typeof O>"u"?!E:O,G=P?x:C;G==null||G(),v==null||v(P),P?y.openMenu():y.closeMenu()},[C,x,v,E,y]),L=e.useCallback(O=>{O.preventDefault(),!r&&I()},[r,I]),k=e.useCallback(()=>{r||I(!0)},[r,I]),R=e.useCallback(()=>{r||I(!1)},[r,I]),A=(O,P)=>{s==null||s(O,P),I(!1)};Ce(()=>I(),{triggerTarget:K,overlayTarget:g,disabled:!E,listenEscape:!1});const S={onMouseEnter:w,onMouseLeave:j},D={onClick:M,onContextMenu:t};z(Ie,m)&&(D.onClick=H(L,D.onClick)),z(ye,m)&&(D.onContextMenu=H(L,t)),z(je,m)&&(S.onMouseEnter=H(k,w),S.onMouseLeave=H(R,j));const T=n.jsx(ie,{..._,...D,ref:K,id:F,className:p,renderTitle:a,disabled:r,placement:f,children:b}),$=n.jsx(te,{ref:g,className:h,style:u,activeKey:d,hidden:!E,placement:f,id:B,onSelect:A,children:o});return n.jsx(X.Provider,{value:{activeKey:d},children:n.jsxs("div",{...S,ref:c,style:i,className:"dropdown",children:[T,n.jsx(V.Provider,{value:y,children:$})]})})});ce.displayName="Dropdown";const ue=ce;ue.Item=ne;ue.Menu=te;export{ue as D,Q as M};
