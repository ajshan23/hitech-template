import{r as t,u as S,j as e,c as x,l as T,g as B}from"./index-DzuwMUJk.js";import{w as O}from"./SidePanel-DXeMio9T.js";import{T as H,A as l}from"./index-DaxwILGT.js";import{D as p}from"./index-ceQsHoYg.js";import{S as L}from"./ScrollBar-BDcfAcYH.js";import{B as j}from"./Badge-tWit_D0R.js";import{B as R}from"./Button-wjgR3boE.js";import{b as $,c as M,d as E,e as G,f as g}from"./toString-wyiJ7teT.js";import{u as I,f as U,g as z}from"./AuthorityCheck-DppwMHiK.js";import{i as D,u as P,a as V}from"./acronym-BKoRt9pr.js";import{u as _}from"./useThemeClass-Dcjf0UNN.js";const u="h-72",q="/img/avatars/",F=({target:r})=>{const s=P();return e.jsx(l,{shape:"circle",className:`${s(r)}`,children:V(r)})},J=r=>{const{type:s,target:o,image:d,status:i}=r;switch(s){case 0:return d?e.jsx(l,{shape:"circle",src:`${q}${d}`}):e.jsx(F,{target:o});case 1:return e.jsx(l,{shape:"circle",className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100",icon:e.jsx(G,{})});case 2:return e.jsx(l,{shape:"circle",className:i==="succeed"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100":"bg-red-100 text-red-600 dark:bg-red-500/20 dark:text-red-100",icon:i==="succeed"?e.jsx(M,{}):e.jsx(E,{})});default:return e.jsx(l,{})}},K=({className:r,dot:s})=>e.jsx("div",{className:x("text-2xl",r),children:s?e.jsx(j,{badgeStyle:{top:"3px",right:"6px"},children:e.jsx(g,{})}):e.jsx(g,{})}),Q=({className:r})=>{const[s,o]=t.useState([]),[d,i]=t.useState(!1),[b,f]=t.useState(!1),[N,m]=t.useState(!1),{bgTheme:y}=_(),{larger:v}=I(),k=S(a=>a.theme.direction),h=t.useCallback(async()=>{(await U()).data.count>0?(f(!1),i(!0)):f(!0)},[i]);t.useEffect(()=>{h()},[h]);const C=t.useCallback(async()=>{if(s.length===0){m(!0);const a=await z();m(!1),o(a.data)}},[s,m]),w=t.useCallback(()=>{const a=s.map(n=>(n.readed||(n.readed=!0),n));o(a),i(!1)},[s]),A=t.useCallback(a=>{const n=s.map(c=>(c.id===a&&(c.readed=!0),c));o(n),s.some(c=>!c.readed)||i(!1)},[s]);return e.jsxs(p,{renderTitle:e.jsx(K,{dot:d,className:r}),menuClass:"p-0 min-w-[280px] md:min-w-[340px]",placement:v.md?"bottom-end":"bottom-center",onOpen:C,children:[e.jsx(p.Item,{variant:"header",children:e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-600 px-4 py-2 flex items-center justify-between",children:[e.jsx("h6",{children:"Notifications"}),e.jsx(H,{title:"Mark all as read",children:e.jsx(R,{variant:"plain",shape:"circle",size:"sm",icon:e.jsx($,{className:"text-xl"}),onClick:w})})]})}),e.jsx("div",{className:x("overflow-y-auto",u),children:e.jsxs(L,{direction:k,children:[s.length>0&&s.map((a,n)=>e.jsxs("div",{className:`relative flex px-4 py-4 cursor-pointer hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-black dark:hover:bg-opacity-20  ${D(s,n)?"":"border-b border-gray-200 dark:border-gray-600"}`,onClick:()=>A(a.id),children:[e.jsx("div",{children:J(a)}),e.jsxs("div",{className:"ltr:ml-3 rtl:mr-3",children:[e.jsxs("div",{children:[a.target&&e.jsxs("span",{className:"font-semibold heading-text",children:[a.target," "]}),e.jsx("span",{children:a.description})]}),e.jsx("span",{className:"text-xs",children:a.date})]}),e.jsx(j,{className:"absolute top-4 ltr:right-4 rtl:left-4 mt-1.5",innerClass:`${a.readed?"bg-gray-300":y} `})]},a.id)),N&&e.jsx("div",{className:x("flex items-center justify-center",u),children:e.jsx(T,{size:40})}),b&&e.jsx("div",{className:x("flex items-center justify-center",u),children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{className:"mx-auto mb-2 max-w-[150px]",src:"/img/others/no-notification.png",alt:"no-notification"}),e.jsx("h6",{className:"font-semibold",children:"No notifications!"}),e.jsx("p",{className:"mt-1",children:"Please Try again later"})]})})]})}),e.jsx(p.Item,{variant:"header",children:e.jsx("div",{className:"flex justify-center border-t border-gray-200 dark:border-gray-600 px-4 py-2",children:e.jsx(B,{to:"/app/account/activity-log",className:"font-semibold cursor-pointer p-2 px-3 text-gray-600 hover:text-gray-900 dark:text-gray-200 dark:hover:text-white",children:"View All Activity"})})})]})},ce=O(Q);export{ce as N};
