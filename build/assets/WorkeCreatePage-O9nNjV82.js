import{r as k,j as e,a9 as f,ah as N}from"./index-B7gDcve1.js";import{F as x,a as w,c as l,d as c}from"./formik.esm-Dw2xo4pZ.js";import{c as b,a as d,g as j}from"./index.esm-Vsnndpo-.js";import"./Alert-D91OON6B.js";import{A as y}from"./index-TDdsVkA9.js";import"./Badge-C_F6d7pz.js";import{B as I}from"./Button-CAnfWXiO.js";import"./index-BSF2ENXU.js";import"./Card-ClSbbZpK.js";import"./index-CUuT-VC2.js";import"./index-OFDI-AcE.js";import"./Dialog-DvUnFmtE.js";import"./Drawer-DB7Zv6KT.js";import"./index-Dd1eIuha.js";import"./useRootClose-C3rMHg9v.js";import{I as u}from"./Input-DDrsmMR1.js";import"./index-C8TF9xIO.js";import"./index-Cex1eUOX.js";import{t as h,N as g}from"./toast-Dkbl9R_F.js";import"./Skeleton-CipR6sCE.js";import"./ScrollBar-6ZjQdx8v.js";import"./index-Cof0AvrT.js";import"./Select-BdpL1eB2.js";import"./index-BxaiHzCN.js";import"./Tag-CGWO6QIl.js";import{U as v}from"./useDidUpdate-67P_oJLh.js";import{ak as F}from"./toString-BTJzyLo_.js";import"./context-Dj6ocMUM.js";import"./index-N1U8ffo8.js";import"./Views-BimbbXt4.js";import"./get-B7Jo_wI6.js";import"./StatusIcon-S-EimYFx.js";import"./CloseButton-CRM9zbV-.js";import"./useColorLevel-10S34ZEH.js";import"./useControllableState-Bg9-jDxW.js";import"./_baseIsEqual-C86fEe5q.js";import"./_getPrototype-BDGNlnFu.js";import"./index-CuJy_WMJ.js";import"./index-Chjiymov.js";import"./isNil-Bi4sFohX.js";import"./chainedFunction-BxZSneMW.js";import"./index-BJgtahsK.js";import"./index-BMxdz22E.js";const W=({onFileUpload:n})=>{const[i,m]=k.useState(null),p=r=>{r.length>0&&(m(URL.createObjectURL(r[0])),n(r))},o=r=>{let t=!0;const a=["image/jpeg","image/png"];if(r)for(const s of r)a.includes(s.type)||(t="Please upload a .jpeg or .png file!");return t};return e.jsx("div",{children:e.jsx(v,{className:"cursor-pointer",showList:!1,uploadLimit:1,beforeUpload:o,onChange:p,children:e.jsx(y,{size:80,src:i,icon:e.jsx(F,{})})})})},C=b().shape({workerName:d().required("Worker Name is required"),phoneNumber:d().required("Phone Number is required").matches(/^\d{10}$/,"Phone Number must be 10 digits"),workerImage:j().required("Worker Image is required")}),Ne=()=>{const n=f(),[i,m]=k.useState(!1),p=async o=>{m(!0);const r=new FormData;r.append("workerName",o.workerName),r.append("phoneNumber",o.phoneNumber),o.workerImage&&r.append("image",o.workerImage);try{if((await N.post("https://mytest.hitechengineeringcompany.in/api/worker",r,{headers:{"Content-Type":"multipart/form-data"}})).status!==201)throw new Error("Failed to create worker");h.push(e.jsx(g,{title:"Worker Created",type:"success",duration:2500,children:"Worker created successfully."}),{placement:"top-center"}),n(-1)}catch(t){console.error("Error creating worker:",t),h.push(e.jsx(g,{title:"Error",type:"danger",duration:2500,children:"Failed to create worker. Please try again."}),{placement:"top-center"})}finally{m(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-6",children:"Create Worker"}),e.jsx(x,{initialValues:{workerName:"",phoneNumber:"",workerImage:null},validationSchema:C,onSubmit:p,children:({setFieldValue:o,values:r,touched:t,errors:a})=>e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{label:"Worker Name",invalid:!!a.workerName&&t.workerName,errorMessage:a.workerName,children:e.jsx(c,{type:"text",autoComplete:"off",name:"workerName",placeholder:"Worker Name",component:u})}),e.jsx(l,{label:"Phone Number",invalid:!!a.phoneNumber&&t.phoneNumber,errorMessage:a.phoneNumber,children:e.jsx(c,{type:"text",autoComplete:"off",name:"phoneNumber",placeholder:"Phone Number",component:u})}),e.jsx(l,{label:"Worker Image",invalid:!!a.workerImage&&t.workerImage,errorMessage:a.workerImage,children:e.jsx(W,{onFileUpload:s=>{s.length>0&&o("workerImage",s[0])}})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{type:"submit",variant:"solid",loading:i,disabled:i,children:"Create Worker"})})]})})})]})};export{Ne as default};
