import{r as t,a7 as E,j as e,ah as b,ai as j}from"./index-Bj3mz5Pw.js";import{A as I}from"./AdaptableCard-CW5rWfWy.js";import{D as z,d as P}from"./debounce-Dydopoza.js";import{B as T}from"./Badge-nyZZIW2G.js";import{ai as L,T as R,W as $}from"./toString-CQNPFSTv.js";import{I as B}from"./Input-9SAYI4Mj.js";import{L as D}from"./LinkButton-BqIn3mOQ.js";import"./Card-vVKS0sxe.js";import"./index-DhcYxbh9.js";import"./index-DereAiEi.js";import"./Skeleton-DUNfQ8XH.js";import"./Select-bc2POzie.js";import"./get-CS1_jRFf.js";import"./Views-Bc58ZmG5.js";import"./context-DBklxPP3.js";import"./index-C28Iij6M.js";import"./_baseIsEqual-WHXuIrZd.js";import"./_getPrototype-Dx9yexOq.js";import"./index-Bkx5KVf2.js";import"./isNil-DFW_rJgM.js";import"./useColorLevel-10S34ZEH.js";const K={true:{dotClass:"bg-emerald-500"},false:{dotClass:"bg-red-500"}},_=({searchTerm:o})=>{const i=t.useRef(null),[d,m]=t.useState([]),[c,f]=t.useState(!0),[u,g]=t.useState(1),[h,w]=t.useState(10),[k,N]=t.useState(0),S=E();t.useEffect(()=>{g(1)},[o]),t.useEffect(()=>{(async()=>{var a,r,l,n;f(!0);try{const p={page:u,limit:h,searchTerm:o||""},x=await b.get(`${j}/worker`,{params:p});m((r=(a=x.data)==null?void 0:a.data)==null?void 0:r.workers),N((n=(l=x.data)==null?void 0:l.data)==null?void 0:n.totalPages)}catch(p){console.error("Error fetching workers:",p)}finally{f(!1)}})()},[u,h,o]);const v=async(s,a)=>{try{const r=await b.put(`${j}/worker/change-status?id=${s}`);m(l=>l.map(n=>n._id===s?{...n,status:!a}:n)),console.log("Status updated successfully:",r.data)}catch(r){console.error("Error toggling worker status:",r)}},y=s=>{S(`/app/worker/form/${s}`)},C=t.useMemo(()=>[{header:"Image",accessorKey:"workerImage",cell:s=>e.jsx("img",{src:s.row.original.workerImage,alt:s.row.original.workerName,className:"w-10 h-10 rounded-full"})},{header:"Worker Name",accessorKey:"workerName",cell:s=>e.jsx("span",{className:"capitalize",children:s.row.original.workerName})},{header:"Phone",accessorKey:"phoneNumber"},{header:"Status",accessorKey:"status",cell:s=>{var l;const r=s.row.original.status;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:((l=K[String(r)])==null?void 0:l.dotClass)||"bg-gray-500"}),e.jsx("span",{className:"capitalize font-semibold",children:r?"Active":"Inactive"})]})}},{header:"Actions",id:"actions",cell:s=>{const a=s.row.original.status;return e.jsxs("div",{className:"flex justify-end gap-2",children:[" ",e.jsx("button",{className:`flex items-center justify-center w-24 h-8 rounded-full transition-colors ${a?"bg-red-500 hover:bg-red-600":"bg-emerald-500 hover:bg-emerald-600"}`,onClick:()=>v(s.row.original._id,a),children:e.jsx("span",{className:"flex items-center gap-1 text-white",children:a?e.jsx(e.Fragment,{children:e.jsx("span",{children:"Deactivate"})}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Activate"})})})}),e.jsx("button",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-500 hover:bg-blue-600 transition-colors text-white",onClick:()=>y(s.row.original._id),children:e.jsx(L,{size:16})})]})}}],[]),W=s=>g(s),A=s=>{w(s),g(1)};return e.jsx(z,{ref:i,columns:C,data:d,loading:c,pagingData:{total:k,pageIndex:u,pageSize:h},onPaginationChange:W,onSelectChange:A})},F=({onSearch:o})=>{const i=t.useRef(null),d=P(c=>{o(c)},500),m=c=>{d(c.target.value)};return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsx(B,{ref:i,className:"w-full md:w-96 md:mb-0 mb-4",size:"sm",placeholder:"Search workers...",prefix:e.jsx(R,{className:"text-lg"}),onChange:m}),e.jsx(D,{to:"/app/worker/form",block:!0,variant:"solid",size:"sm",icon:e.jsx($,{}),className:"block lg:inline-block md:mb-0 mb-4",children:"Add Worker"})]})},ce=()=>{const[o,i]=t.useState("");return e.jsxs(I,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Workers"}),e.jsx(F,{onSearch:i})]}),e.jsx(_,{searchTerm:o})]})};export{ce as default};
