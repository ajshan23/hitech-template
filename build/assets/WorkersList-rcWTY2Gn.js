import{r as t,j as e,ah as b,ai as j}from"./index-CRCGT5cQ.js";import{A as W}from"./AdaptableCard-2DH9kqgm.js";import{D as A,d as I}from"./debounce-C2NLN46-.js";import{B as E}from"./Badge-Bn4kgMEE.js";import{T as z,W as P}from"./toString-CDxwsaWm.js";import{I as T}from"./Input-DnM1Q3kg.js";import{L}from"./LinkButton-DUk7BofO.js";import"./Card-B3QSBYB7.js";import"./index-CIFCYHMU.js";import"./index-ZWbFM_Gb.js";import"./Skeleton-C5F8bFiu.js";import"./Select-DwKsi4Il.js";import"./get-Ccuh4g_W.js";import"./Views-D27GNbXG.js";import"./context-KacpuizG.js";import"./index-CNxlEFHV.js";import"./_baseIsEqual-viotgoeI.js";import"./_getPrototype-2diiNcTy.js";import"./index-DlOaJHXQ.js";import"./isNil-WLEgZIWA.js";import"./useColorLevel-10S34ZEH.js";const R={true:{dotClass:"bg-emerald-500"},false:{dotClass:"bg-red-500"}},B=({searchTerm:o})=>{const c=t.useRef(null),[d,m]=t.useState([]),[i,f]=t.useState(!0),[u,g]=t.useState(1),[p,k]=t.useState(10),[w,N]=t.useState(0);t.useEffect(()=>{g(1)},[o]),t.useEffect(()=>{(async()=>{var a,r,l,n;f(!0);try{const h={page:u,limit:p,searchTerm:o||""},x=await b.get(`${j}/worker`,{params:h});m((r=(a=x.data)==null?void 0:a.data)==null?void 0:r.workers),N((n=(l=x.data)==null?void 0:l.data)==null?void 0:n.totalPages)}catch(h){console.error("Error fetching workers:",h)}finally{f(!1)}})()},[u,p,o]);const S=async(s,a)=>{try{const r=await b.put(`${j}/worker/change-status?id=${s}`);m(l=>l.map(n=>n._id===s?{...n,status:!a}:n)),console.log("Status updated successfully:",r.data)}catch(r){console.error("Error toggling worker status:",r)}},y=t.useMemo(()=>[{header:"Image",accessorKey:"workerImage",cell:s=>e.jsx("img",{src:s.row.original.workerImage,alt:s.row.original.workerName,className:"w-10 h-10 rounded-full"})},{header:"Worker Name",accessorKey:"workerName",cell:s=>e.jsx("span",{className:"capitalize",children:s.row.original.workerName})},{header:"Phone",accessorKey:"phoneNumber"},{header:"Status",accessorKey:"status",cell:s=>{var l;const r=s.row.original.status;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:((l=R[String(r)])==null?void 0:l.dotClass)||"bg-gray-500"}),e.jsx("span",{className:"capitalize font-semibold",children:r?"Active":"Inactive"})]})}},{header:"Actions",id:"actions",cell:s=>{const a=s.row.original.status;return e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:`flex items-center justify-center w-24 h-8 rounded-full transition-colors ${a?"bg-red-500 hover:bg-red-600":"bg-emerald-500 hover:bg-emerald-600"}`,onClick:()=>S(s.row.original._id,a),children:e.jsx("span",{className:"flex items-center gap-1 text-white",children:a?e.jsx(e.Fragment,{children:e.jsx("span",{children:"Deactivate"})}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Activate"})})})})})}}],[]),v=s=>g(s),C=s=>{k(s),g(1)};return e.jsx(A,{ref:c,columns:y,data:d,loading:i,pagingData:{total:w,pageIndex:u,pageSize:p},onPaginationChange:v,onSelectChange:C})},D=({onSearch:o})=>{const c=t.useRef(null),d=I(i=>{o(i)},500),m=i=>{d(i.target.value)};return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsx(T,{ref:c,className:"w-full md:w-96 md:mb-0 mb-4",size:"sm",placeholder:"Search workers...",prefix:e.jsx(z,{className:"text-lg"}),onChange:m}),e.jsx(L,{to:"/app/worker/form",block:!0,variant:"solid",size:"sm",icon:e.jsx(P,{}),className:"block lg:inline-block md:mb-0 mb-4",children:"Add Worker"})]})},oe=()=>{const[o,c]=t.useState("");return e.jsxs(W,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Workers"}),e.jsx(D,{onSearch:c})]}),e.jsx(B,{searchTerm:o})]})};export{oe as default};
