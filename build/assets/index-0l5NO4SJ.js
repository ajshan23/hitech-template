import{r as C,a7 as F,j as s,a8 as y}from"./index-Bj3mz5Pw.js";import{F as N,a as S,b as k,c as d,d as c}from"./formik.esm-sXIm4dFv.js";import{B as l}from"./Button-Dhq_u3bq.js";import{A as R}from"./Alert-COxxIF6A.js";import{P as p}from"./PasswordInput-BRlUjMr3.js";import{A}from"./ActionLink-CrbLs8U9.js";import{u as I}from"./useTimeOutMessage-CT-pCTJa.js";import{c as M,a as w,d as B}from"./index.esm-DZfJtAA7.js";import"./context-DBklxPP3.js";import"./index-DUqM6xV3.js";import"./Views-Bc58ZmG5.js";import"./get-CS1_jRFf.js";import"./toString-CQNPFSTv.js";import"./useColorLevel-10S34ZEH.js";import"./StatusIcon-sOt29h0g.js";import"./CloseButton-PxoRbE_t.js";import"./Input-9SAYI4Mj.js";import"./isNil-DFW_rJgM.js";import"./useThemeClass-JsLiYU2F.js";const Y=M().shape({password:w().required("Please enter your password"),confirmPassword:w().oneOf([B("password")],"Your passwords do not match")}),$=f=>{const{disableSubmit:u=!1,className:h,signInUrl:x="/sign-in"}=f,[t,j]=C.useState(!1),[n,b]=I(),P=F(),g=async(r,e)=>{var i,m;const{password:o}=r;e(!0);try{(await y({password:o})).data&&(e(!1),j(!0))}catch(a){b(((m=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:m.message)||a.toString()),e(!1)}},v=()=>{P("/sign-in")};return s.jsxs("div",{className:h,children:[s.jsx("div",{className:"mb-6",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Reset done"}),s.jsx("p",{children:"Your password has been successfully reset"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Set new password"}),s.jsx("p",{children:"Your new password must different to previos password"})]})}),n&&s.jsx(R,{showIcon:!0,className:"mb-4",type:"danger",children:n}),s.jsx(N,{initialValues:{password:"123Qwe1",confirmPassword:"123Qwe1"},validationSchema:Y,onSubmit:(r,{setSubmitting:e})=>{u?e(!1):g(r,e)},children:({touched:r,errors:e,isSubmitting:o})=>s.jsx(S,{children:s.jsxs(k,{children:[t?s.jsx(l,{block:!0,variant:"solid",type:"button",onClick:v,children:"Continue"}):s.jsxs(s.Fragment,{children:[s.jsx(d,{label:"Password",invalid:e.password&&r.password,errorMessage:e.password,children:s.jsx(c,{autoComplete:"off",name:"password",placeholder:"Password",component:p})}),s.jsx(d,{label:"Confirm Password",invalid:e.confirmPassword&&r.confirmPassword,errorMessage:e.confirmPassword,children:s.jsx(c,{autoComplete:"off",name:"confirmPassword",placeholder:"Confirm Password",component:p})}),s.jsx(l,{block:!0,loading:o,variant:"solid",type:"submit",children:o?"Submiting...":"Submit"})]}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{children:"Back to "}),s.jsx(A,{to:x,children:"Sign in"})]})]})})})]})},es=()=>s.jsx($,{disableSubmit:!1});export{es as default};
