import{r as k,j as e,a9 as f,ah as N}from"./index-C2iY12u9.js";import{F as x,a as w,c as l,d as c}from"./formik.esm-ArP3_adF.js";import{c as b,a as d,g as j}from"./index.esm-7-xCUnXA.js";import"./Alert-BUCnMLNe.js";import{A as y}from"./index-BugQn9pU.js";import"./Badge-pgMGCxOU.js";import{B as I}from"./Button-D3qeit4v.js";import"./index-BdWTLzCH.js";import"./Card-BOIsTUCi.js";import"./index-CgfdXKrB.js";import"./index-n4AhYPz9.js";import"./Dialog-dSu66xmJ.js";import"./Drawer-BbgQ8DD9.js";import"./index-Dq2v8-oy.js";import"./useRootClose-CBf41JAC.js";import{I as u}from"./Input-CF3VyKMy.js";import"./index-BEn5L5k6.js";import"./index-DAy840b7.js";import{t as h,N as g}from"./toast-B92lzaP4.js";import"./Skeleton-CmOtYc4u.js";import"./ScrollBar-fS8lh1Wz.js";import"./index-CIR-zfpl.js";import"./Select-DVojIqnk.js";import"./index-ByEeNh7A.js";import"./Tag-CPjWtCnv.js";import{U as v}from"./useDidUpdate-Cfkr9bLD.js";import{ak as F}from"./toString-DHyRyMxG.js";import"./context-Cji_IDOW.js";import"./index-pusp267n.js";import"./Views-DVTSfLY6.js";import"./get-C0nIbHDE.js";import"./StatusIcon-zd0QlFoJ.js";import"./CloseButton-CQqh2RdZ.js";import"./useColorLevel-10S34ZEH.js";import"./useControllableState-CSGbWlWY.js";import"./_baseIsEqual-CfyzSPg-.js";import"./_getPrototype-3ogqeYEm.js";import"./index-DUhMXm8U.js";import"./index-Chjiymov.js";import"./isNil-DIAHqIoc.js";import"./chainedFunction-BxZSneMW.js";import"./index-D_PTICrA.js";import"./index-3FLpAjPU.js";const W=({onFileUpload:n})=>{const[i,m]=k.useState(null),p=r=>{r.length>0&&(m(URL.createObjectURL(r[0])),n(r))},o=r=>{let t=!0;const a=["image/jpeg","image/png"];if(r)for(const s of r)a.includes(s.type)||(t="Please upload a .jpeg or .png file!");return t};return e.jsx("div",{children:e.jsx(v,{className:"cursor-pointer",showList:!1,uploadLimit:1,beforeUpload:o,onChange:p,children:e.jsx(y,{size:80,src:i,icon:e.jsx(F,{})})})})},C=b().shape({workerName:d().required("Worker Name is required"),phoneNumber:d().required("Phone Number is required").matches(/^\d{10}$/,"Phone Number must be 10 digits"),workerImage:j().required("Worker Image is required")}),Ne=()=>{const n=f(),[i,m]=k.useState(!1),p=async o=>{m(!0);const r=new FormData;r.append("workerName",o.workerName),r.append("phoneNumber",o.phoneNumber),o.workerImage&&r.append("image",o.workerImage);try{if((await N.post("https://mytest.hitechengineeringcompany.in/api/worker",r,{headers:{"Content-Type":"multipart/form-data"}})).status!==201)throw new Error("Failed to create worker");h.push(e.jsx(g,{title:"Worker Created",type:"success",duration:2500,children:"Worker created successfully."}),{placement:"top-center"}),n(-1)}catch(t){console.error("Error creating worker:",t),h.push(e.jsx(g,{title:"Error",type:"danger",duration:2500,children:"Failed to create worker. Please try again."}),{placement:"top-center"})}finally{m(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"mb-6",children:"Create Worker"}),e.jsx(x,{initialValues:{workerName:"",phoneNumber:"",workerImage:null},validationSchema:C,onSubmit:p,children:({setFieldValue:o,values:r,touched:t,errors:a})=>e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{label:"Worker Name",invalid:!!a.workerName&&t.workerName,errorMessage:a.workerName,children:e.jsx(c,{type:"text",autoComplete:"off",name:"workerName",placeholder:"Worker Name",component:u})}),e.jsx(l,{label:"Phone Number",invalid:!!a.phoneNumber&&t.phoneNumber,errorMessage:a.phoneNumber,children:e.jsx(c,{type:"text",autoComplete:"off",name:"phoneNumber",placeholder:"Phone Number",component:u})}),e.jsx(l,{label:"Worker Image",invalid:!!a.workerImage&&t.workerImage,errorMessage:a.workerImage,children:e.jsx(W,{onFileUpload:s=>{s.length>0&&o("workerImage",s[0])}})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{type:"submit",variant:"solid",loading:i,disabled:i,children:"Create Worker"})})]})})})]})};export{Ne as default};
