import{r as t,a9 as D,j as e,ah as k}from"./index-B7gDcve1.js";import{A as I}from"./AdaptableCard-DWDoig49.js";import{O as K,F as E}from"./toString-BTJzyLo_.js";import{D as J}from"./DataTable-Bg1__MjQ.js";import{I as T}from"./Input-DDrsmMR1.js";import{C as z}from"./index-CUuT-VC2.js";import{d as B}from"./debounce-C-swc0Qo.js";import"./Card-ClSbbZpK.js";import"./Views-BimbbXt4.js";import"./index-BxaiHzCN.js";import"./index-BJgtahsK.js";import"./Skeleton-CipR6sCE.js";import"./Select-BdpL1eB2.js";import"./get-B7Jo_wI6.js";import"./context-Dj6ocMUM.js";import"./index-BzaCQqcK.js";import"./isNil-Bi4sFohX.js";import"./_baseIsEqual-C86fEe5q.js";import"./_getPrototype-BDGNlnFu.js";const F=({searchTerm:r,filters:o})=>{const i=t.useRef(null),n=D(),[d,m]=t.useState([]),[h,s]=t.useState(!0),[u,p]=t.useState(1),[x,y]=t.useState(10),[w,N]=t.useState(0);t.useEffect(()=>{p(1)},[r,o]),t.useEffect(()=>{(async()=>{var c,g,f,j;s(!0);try{const l={page:u,limit:x,searchTerm:r||"",billed:!0};o.warranty!==void 0&&(l.warranty=o.warranty);const b=await k.get("https://mytest.hitechengineeringcompany.in/api/jobcards/",{params:l});m((g=(c=b.data)==null?void 0:c.data)==null?void 0:g.data),N((j=(f=b.data)==null?void 0:f.data)==null?void 0:j.countOfDocuments)}catch(l){console.error("Error fetching job cards:",l)}finally{s(!1)}})()},[u,x,r,o]);const C=t.useMemo(()=>[{header:"Customer Name",accessorKey:"customerName",cell:a=>e.jsx("span",{className:"capitalize",children:a.row.original.customerName})},{header:"Phone",accessorKey:"phoneNumber"},{header:"Date",accessorKey:"InDate",cell:a=>e.jsx("span",{children:new Date(a.row.original.InDate).toLocaleDateString()})},{header:"Jobcard No.",accessorKey:"jobCardNumber"},{header:"Worker",accessorKey:"worker",cell:a=>{const c=a.row.original.worker;return c?e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:c.workerImage,alt:c.workerName,className:"w-10 h-10 rounded-full object-cover"})}):e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{children:"-"})})}},{header:"Invoice Number",accessorKey:"invoiceNumber"},{header:"Invoice Date",accessorKey:"invoiceDate",cell:a=>e.jsx("span",{children:new Date(a.row.original.invoiceDate).toLocaleDateString()})},{header:"Actions",id:"actions",cell:a=>e.jsx("div",{className:"flex justify-end text-lg",children:e.jsx("span",{className:"cursor-pointer p-2 hover:text-green-500",onClick:()=>n(`/app/jobcards/jobcard/${a.row.original._id}`),children:e.jsx(K,{})})})}],[n]),S=a=>p(a),v=a=>{y(a),p(1)};return e.jsx(J,{ref:i,columns:C,data:d,loading:h,pagingData:{total:w,pageIndex:u,pageSize:x},onPaginationChange:S,onSelectChange:v})},L=({onSearch:r,onFilter:o})=>{const[i,n]=t.useState(!1),d=B(s=>{r(s)},500),m=s=>{d(s.target.value)},h=s=>{n(s),o({warranty:s})};return e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[e.jsx(T,{className:"w-full md:w-96 md:mb-0 mb-4",size:"sm",placeholder:"Search billed job cards...",prefix:e.jsx(E,{className:"text-lg"}),onChange:m}),e.jsx("div",{className:"flex items-center",children:e.jsx(z,{checked:i,onChange:h,children:"Warranty"})})]})},te=()=>{const[r,o]=t.useState(""),[i,n]=t.useState({});return e.jsxs(I,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Billed Job Cards"}),e.jsx(L,{onSearch:o,onFilter:n})]}),e.jsx(F,{searchTerm:r,filters:i})]})};export{te as default};
